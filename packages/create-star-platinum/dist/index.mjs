import As from"readline";import Ms from"events";import F from"node:path";import O from"node:fs";import js from"child_process";import we from"path";import ye from"fs";import{fileURLToPath as rt}from"node:url";import Is from"ora";import Ls from"download-git-repo";import{promisify as Ns}from"node:util";import{ESLint as Rs}from"eslint";var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bs(t){var e=t.default;if(typeof e=="function"){var s=function(){return e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(s,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),s}function Hs(t,e){var s=t;e.slice(0,-1).forEach(function(n){s=s[n]||{}});var i=e[e.length-1];return i in s}function nt(t){return typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function ot(t,e){return e==="constructor"&&typeof t[e]=="function"||e==="__proto__"}var Vs=function(t,e){e||(e={});var s={bools:{},strings:{},unknownFn:null};typeof e.unknown=="function"&&(s.unknownFn=e.unknown),typeof e.boolean=="boolean"&&e.boolean?s.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(w){s.bools[w]=!0});var i={};function n(w){return i[w].some(function(g){return s.bools[g]})}Object.keys(e.alias||{}).forEach(function(w){i[w]=[].concat(e.alias[w]),i[w].forEach(function(g){i[g]=[w].concat(i[w].filter(function(x){return g!==x}))})}),[].concat(e.string).filter(Boolean).forEach(function(w){s.strings[w]=!0,i[w]&&[].concat(i[w]).forEach(function(g){s.strings[g]=!0})});var o=e.default||{},r={_:[]};function h(w,g){return s.allBools&&/^--[^=]+$/.test(g)||s.strings[w]||s.bools[w]||i[w]}function v(w,g,x){for(var $=w,_=0;_<g.length-1;_++){var l=g[_];if(ot($,l))return;$[l]===void 0&&($[l]={}),($[l]===Object.prototype||$[l]===Number.prototype||$[l]===String.prototype)&&($[l]={}),$[l]===Array.prototype&&($[l]=[]),$=$[l]}var u=g[g.length-1];ot($,u)||(($===Object.prototype||$===Number.prototype||$===String.prototype)&&($={}),$===Array.prototype&&($=[]),$[u]===void 0||s.bools[u]||typeof $[u]=="boolean"?$[u]=x:Array.isArray($[u])?$[u].push(x):$[u]=[$[u],x])}function c(w,g,x){if(!(x&&s.unknownFn&&!h(w,x)&&s.unknownFn(x)===!1)){var $=!s.strings[w]&&nt(g)?Number(g):g;v(r,w.split("."),$),(i[w]||[]).forEach(function(_){v(r,_.split("."),$)})}}Object.keys(s.bools).forEach(function(w){c(w,o[w]===void 0?!1:o[w])});var y=[];t.indexOf("--")!==-1&&(y=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var p=0;p<t.length;p++){var f=t[p],m,E;if(/^--.+=/.test(f)){var D=f.match(/^--([^=]+)=([\s\S]*)$/);m=D[1];var I=D[2];s.bools[m]&&(I=I!=="false"),c(m,I,f)}else if(/^--no-.+/.test(f))m=f.match(/^--no-(.+)/)[1],c(m,!1,f);else if(/^--.+/.test(f))m=f.match(/^--(.+)/)[1],E=t[p+1],E!==void 0&&!/^(-|--)[^-]/.test(E)&&!s.bools[m]&&!s.allBools&&(i[m]?!n(m):!0)?(c(m,E,f),p+=1):/^(true|false)$/.test(E)?(c(m,E==="true",f),p+=1):c(m,s.strings[m]?"":!0,f);else if(/^-[^-]+/.test(f)){for(var M=f.slice(1,-1).split(""),L=!1,A=0;A<M.length;A++){if(E=f.slice(A+2),E==="-"){c(M[A],E,f);continue}if(/[A-Za-z]/.test(M[A])&&E[0]==="="){c(M[A],E.slice(1),f),L=!0;break}if(/[A-Za-z]/.test(M[A])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(E)){c(M[A],E,f),L=!0;break}if(M[A+1]&&M[A+1].match(/\W/)){c(M[A],f.slice(A+2),f),L=!0;break}else c(M[A],s.strings[M[A]]?"":!0,f)}m=f.slice(-1)[0],!L&&m!=="-"&&(t[p+1]&&!/^(-|--)[^-]/.test(t[p+1])&&!s.bools[m]&&(i[m]?!n(m):!0)?(c(m,t[p+1],f),p+=1):t[p+1]&&/^(true|false)$/.test(t[p+1])?(c(m,t[p+1]==="true",f),p+=1):c(m,s.strings[m]?"":!0,f))}else if((!s.unknownFn||s.unknownFn(f)!==!1)&&r._.push(s.strings._||!nt(f)?f:Number(f)),e.stopEarly){r._.push.apply(r._,t.slice(p+1));break}}return Object.keys(o).forEach(function(w){Hs(r,w.split("."))||(v(r,w.split("."),o[w]),(i[w]||[]).forEach(function(g){v(r,g.split("."),o[w])}))}),e["--"]?r["--"]=y.slice():y.forEach(function(w){r._.push(w)}),r};let ee=!0;const re=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let at=0;if(re.process&&re.process.env&&re.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,NO_COLOR:s,TERM:i}=re.process.env;e||s||t==="0"?ee=!1:t==="1"||t==="2"||t==="3"?ee=!0:i==="dumb"?ee=!1:"CI"in re.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in re.process.env)?ee=!0:ee=process.stdout.isTTY,ee&&(at=i&&i.endsWith("-256color")?2:1)}let lt={enabled:ee,supportLevel:at};function Y(t,e,s=1){const i=`\x1B[${t}m`,n=`\x1B[${e}m`,o=new RegExp(`\\x1b\\[${e}m`,"g");return r=>lt.enabled&&lt.supportLevel>=s?i+(""+r).replace(o,i)+n:""+r}const ue=Y(0,0),De=Y(31,39),he=Y(32,39),ct=Y(33,39),ut=Y(34,39),Ws=Y(36,39),ht=Y(41,49),dt=Y(42,49),Ys=Y(46,49),Us="create-star-platinum",Js="2.2.1",zs="module",Gs="qi-chen-ming",Xs="Using vite's scaffolding tool, you can create vue, react, and other projects.",qs={"create-sp":"index.js"},Ks=["index.js","dist","template-*","tep-*"],Zs="index.js",Qs={dev:"unbuild --stub",build:"unbuild"},ei={node:"^14.18.0 || >=16.0.0"},ti={type:"git",url:"git+https://github.com/qi-chen-ming/star-platinum-cli",directory:"packages/create-star-platinum"},si={url:"https://github.com/qi-chen-ming/star-platinum-cli/issues"},ii="https://github.com/qi-chen-ming/star-platinum-cli/tree/main/packages/create-star-platinum#readme",ri=["vite","vue","react","cli"],ni="ISC",oi={"@types/ejs":"^3.1.2","@types/eslint":"^8.37.0","@types/prompts":"^2.4.4","cross-spawn":"^7.0.3",ejs:"^3.1.9",kolorist:"^1.7.0",minimist:"^1.2.8",prompts:"^2.4.2",unbuild:"0.8.11"},ai="a6bb5c1dfa015599b1167ace194f65df3b082a23",li={"download-git-repo":"^3.0.2",eslint:"^8.39.0",ora:"^6.3.0"},ci={name:Us,version:Js,type:zs,author:Gs,description:Xs,bin:qs,files:Ks,main:Zs,scripts:Qs,engines:ei,repository:ti,bugs:si,homepage:ii,keywords:ri,license:ni,devDependencies:oi,gitHead:ai,dependencies:li};function ui(){console.log(dt(" create-star-platinum "),`version is ${ci.version}`),process.exit(0)}var ft={};const{FORCE_COLOR:hi,NODE_DISABLE_COLORS:di,TERM:fi}=process.env,S={enabled:!di&&fi!=="dumb"&&hi!=="0",reset:C(0,0),bold:C(1,22),dim:C(2,22),italic:C(3,23),underline:C(4,24),inverse:C(7,27),hidden:C(8,28),strikethrough:C(9,29),black:C(30,39),red:C(31,39),green:C(32,39),yellow:C(33,39),blue:C(34,39),magenta:C(35,39),cyan:C(36,39),white:C(37,39),gray:C(90,39),grey:C(90,39),bgBlack:C(40,49),bgRed:C(41,49),bgGreen:C(42,49),bgYellow:C(43,49),bgBlue:C(44,49),bgMagenta:C(45,49),bgCyan:C(46,49),bgWhite:C(47,49)};function pt(t,e){let s=0,i,n="",o="";for(;s<t.length;s++)i=t[s],n+=i.open,o+=i.close,e.includes(i.close)&&(e=e.replace(i.rgx,i.close+i.open));return n+e+o}function pi(t,e){let s={has:t,keys:e};return s.reset=S.reset.bind(s),s.bold=S.bold.bind(s),s.dim=S.dim.bind(s),s.italic=S.italic.bind(s),s.underline=S.underline.bind(s),s.inverse=S.inverse.bind(s),s.hidden=S.hidden.bind(s),s.strikethrough=S.strikethrough.bind(s),s.black=S.black.bind(s),s.red=S.red.bind(s),s.green=S.green.bind(s),s.yellow=S.yellow.bind(s),s.blue=S.blue.bind(s),s.magenta=S.magenta.bind(s),s.cyan=S.cyan.bind(s),s.white=S.white.bind(s),s.gray=S.gray.bind(s),s.grey=S.grey.bind(s),s.bgBlack=S.bgBlack.bind(s),s.bgRed=S.bgRed.bind(s),s.bgGreen=S.bgGreen.bind(s),s.bgYellow=S.bgYellow.bind(s),s.bgBlue=S.bgBlue.bind(s),s.bgMagenta=S.bgMagenta.bind(s),s.bgCyan=S.bgCyan.bind(s),s.bgWhite=S.bgWhite.bind(s),s}function C(t,e){let s={open:`\x1B[${t}m`,close:`\x1B[${e}m`,rgx:new RegExp(`\\x1b\\[${e}m`,"g")};return function(i){return this!==void 0&&this.has!==void 0?(this.has.includes(t)||(this.has.push(t),this.keys.push(s)),i===void 0?this:S.enabled?pt(this.keys,i+""):i+""):i===void 0?pi([t],[s]):S.enabled?pt([s],i+""):i+""}}var B=S,mi=(t,e)=>{if(!(t.meta&&t.name!=="escape")){if(t.ctrl){if(t.name==="a")return"first";if(t.name==="c"||t.name==="d")return"abort";if(t.name==="e")return"last";if(t.name==="g")return"reset"}if(e){if(t.name==="j")return"down";if(t.name==="k")return"up"}return t.name==="return"||t.name==="enter"?"submit":t.name==="backspace"?"delete":t.name==="delete"?"deleteForward":t.name==="abort"?"abort":t.name==="escape"?"exit":t.name==="tab"?"next":t.name==="pagedown"?"nextPage":t.name==="pageup"?"prevPage":t.name==="home"?"home":t.name==="end"?"end":t.name==="up"?"up":t.name==="down"?"down":t.name==="right"?"right":t.name==="left"?"left":!1}},Fe=t=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),s=new RegExp(e,"g");return typeof t=="string"?t.replace(s,""):t};const Ae="\x1B",P=`${Ae}[`,gi="\x07",Me={to(t,e){return e?`${P}${e+1};${t+1}H`:`${P}${t+1}G`},move(t,e){let s="";return t<0?s+=`${P}${-t}D`:t>0&&(s+=`${P}${t}C`),e<0?s+=`${P}${-e}A`:e>0&&(s+=`${P}${e}B`),s},up:(t=1)=>`${P}${t}A`,down:(t=1)=>`${P}${t}B`,forward:(t=1)=>`${P}${t}C`,backward:(t=1)=>`${P}${t}D`,nextLine:(t=1)=>`${P}E`.repeat(t),prevLine:(t=1)=>`${P}F`.repeat(t),left:`${P}G`,hide:`${P}?25l`,show:`${P}?25h`,save:`${Ae}7`,restore:`${Ae}8`},vi={up:(t=1)=>`${P}S`.repeat(t),down:(t=1)=>`${P}T`.repeat(t)},bi={screen:`${P}2J`,up:(t=1)=>`${P}1J`.repeat(t),down:(t=1)=>`${P}J`.repeat(t),line:`${P}2K`,lineEnd:`${P}K`,lineStart:`${P}1K`,lines(t){let e="";for(let s=0;s<t;s++)e+=this.line+(s<t-1?Me.up():"");return t&&(e+=Me.left),e}};var H={cursor:Me,scroll:vi,erase:bi,beep:gi};const wi=Fe,{erase:mt,cursor:yi}=H,$i=t=>[...wi(t)].length;var Ei=function(t,e){if(!e)return mt.line+yi.to(0);let s=0;const i=t.split(/\r?\n/);for(let n of i)s+=1+Math.floor(Math.max($i(n)-1,0)/e);return mt.lines(s)};const de={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},Si={arrowUp:de.arrowUp,arrowDown:de.arrowDown,arrowLeft:de.arrowLeft,arrowRight:de.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"},xi=process.platform==="win32"?Si:de;var gt=xi;const ne=B,te=gt,je=Object.freeze({password:{scale:1,render:t=>"*".repeat(t.length)},emoji:{scale:2,render:t=>"\u{1F603}".repeat(t.length)},invisible:{scale:0,render:t=>""},default:{scale:1,render:t=>`${t}`}}),_i=t=>je[t]||je.default,fe=Object.freeze({aborted:ne.red(te.cross),done:ne.green(te.tick),exited:ne.yellow(te.cross),default:ne.cyan("?")}),Ci=(t,e,s)=>e?fe.aborted:s?fe.exited:t?fe.done:fe.default,Oi=t=>ne.gray(t?te.ellipsis:te.pointerSmall),Ti=(t,e)=>ne.gray(t?e?te.pointerSmall:"+":te.line);var Pi={styles:je,render:_i,symbols:fe,symbol:Ci,delimiter:Oi,item:Ti};const Di=Fe;var Fi=function(t,e){let s=String(Di(t)||"").split(/\r?\n/);return e?s.map(i=>Math.ceil(i.length/e)).reduce((i,n)=>i+n):s.length},Ai=(t,e={})=>{const s=Number.isSafeInteger(parseInt(e.margin))?new Array(parseInt(e.margin)).fill(" ").join(""):e.margin||"",i=e.width;return(t||"").split(/\r?\n/g).map(n=>n.split(/\s+/g).reduce((o,r)=>(r.length+s.length>=i||o[o.length-1].length+r.length+1<i?o[o.length-1]+=` ${r}`:o.push(`${s}${r}`),o),[s]).join(`
`)).join(`
`)},Mi=(t,e,s)=>{s=s||e;let i=Math.min(e-s,t-Math.floor(s/2));i<0&&(i=0);let n=Math.min(i+s,e);return{startIndex:i,endIndex:n}},V={action:mi,clear:Ei,style:Pi,strip:Fe,figures:gt,lines:Fi,wrap:Ai,entriesToDisplay:Mi};const vt=As,{action:ji}=V,Ii=Ms,{beep:Li,cursor:Ni}=H,Ri=B;class ki extends Ii{constructor(e={}){super(),this.firstRender=!0,this.in=e.stdin||process.stdin,this.out=e.stdout||process.stdout,this.onRender=(e.onRender||(()=>{})).bind(this);const s=vt.createInterface({input:this.in,escapeCodeTimeout:50});vt.emitKeypressEvents(this.in,s),this.in.isTTY&&this.in.setRawMode(!0);const i=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,n=(o,r)=>{let h=ji(r,i);h===!1?this._&&this._(o,r):typeof this[h]=="function"?this[h](r):this.bell()};this.close=()=>{this.out.write(Ni.show),this.in.removeListener("keypress",n),this.in.isTTY&&this.in.setRawMode(!1),s.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",n)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(Li)}render(){this.onRender(Ri),this.firstRender&&(this.firstRender=!1)}}var q=ki;const $e=B,Bi=q,{erase:Hi,cursor:pe}=H,{style:Ie,clear:Le,lines:Vi,figures:Wi}=V;class Yi extends Bi{constructor(e={}){super(e),this.transform=Ie.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=Le("",this.out.columns),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=$e.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this._value=e,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,s){let i=this.value.slice(0,this.cursor),n=this.value.slice(this.cursor);this.value=`${i}${e}${n}`,this.red=!1,this.cursor=this.placeholder?0:i.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),s=this.value.slice(this.cursor);this.value=`${e}${s}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),s=this.value.slice(this.cursor+1);this.value=`${e}${s}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(pe.down(Vi(this.outputError,this.out.columns)-1)+Le(this.outputError,this.out.columns)),this.out.write(Le(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Ie.symbol(this.done,this.aborted),$e.bold(this.msg),Ie.delimiter(this.done),this.red?$e.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,s,i)=>e+`
${i?" ":Wi.pointerSmall} ${$e.red().italic(s)}`,"")),this.out.write(Hi.line+pe.to(0)+this.outputText+pe.save+this.outputError+pe.restore+pe.move(this.cursorOffset,0)))}}var Ui=Yi;const U=B,Ji=q,{style:bt,clear:wt,figures:Ee,wrap:zi,entriesToDisplay:Gi}=V,{cursor:Xi}=H;class qi extends Ji{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map((s,i)=>(typeof s=="string"&&(s={title:s,value:i}),{title:s&&(s.title||s.value||s),value:s&&(s.value===void 0?i:s.value),description:s&&s.description,selected:s&&s.selected,disabled:s&&s.disabled})),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=wt("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,s){if(e===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(Xi.hide):this.out.write(wt(this.outputText,this.out.columns)),super.render();let{startIndex:e,endIndex:s}=Gi(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[bt.symbol(this.done,this.aborted),U.bold(this.msg),bt.delimiter(!1),this.done?this.selection.title:this.selection.disabled?U.yellow(this.warn):U.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let i=e;i<s;i++){let n,o,r="",h=this.choices[i];i===e&&e>0?o=Ee.arrowUp:i===s-1&&s<this.choices.length?o=Ee.arrowDown:o=" ",h.disabled?(n=this.cursor===i?U.gray().underline(h.title):U.strikethrough().gray(h.title),o=(this.cursor===i?U.bold().gray(Ee.pointer)+" ":"  ")+o):(n=this.cursor===i?U.cyan().underline(h.title):h.title,o=(this.cursor===i?U.cyan(Ee.pointer)+" ":"  ")+o,h.description&&this.cursor===i&&(r=` - ${h.description}`,(o.length+n.length+r.length>=this.out.columns||h.description.split(/\r?\n/).length>1)&&(r=`
`+zi(h.description,{margin:3,width:this.out.columns})))),this.outputText+=`${o} ${n}${U.gray(r)}
`}}this.out.write(this.outputText)}}var Ki=qi;const Se=B,Zi=q,{style:yt,clear:Qi}=V,{cursor:$t,erase:er}=H;class tr extends Zi{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,s){if(e===" ")this.value=!this.value;else if(e==="1")this.value=!0;else if(e==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write($t.hide):this.out.write(Qi(this.outputText,this.out.columns)),super.render(),this.outputText=[yt.symbol(this.done,this.aborted),Se.bold(this.msg),yt.delimiter(this.done),this.value?this.inactive:Se.cyan().underline(this.inactive),Se.gray("/"),this.value?Se.cyan().underline(this.active):this.active].join(" "),this.out.write(er.line+$t.to(0)+this.outputText))}}var sr=tr;class Te{constructor({token:e,date:s,parts:i,locales:n}){this.token=e,this.date=s||new Date,this.parts=i||[this],this.locales=n||{}}up(){}down(){}next(){const e=this.parts.indexOf(this);return this.parts.find((s,i)=>i>e&&s instanceof Te)}setTo(e){}prev(){let e=[].concat(this.parts).reverse();const s=e.indexOf(this);return e.find((i,n)=>n>s&&i instanceof Te)}toString(){return String(this.date)}}var J=Te;const ir=J;class rr extends ir{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}}var nr=rr;const or=J,ar=t=>(t=t%10,t===1?"st":t===2?"nd":t===3?"rd":"th");class lr extends or{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),s=this.date.getDay();return this.token==="DD"?String(e).padStart(2,"0"):this.token==="Do"?e+ar(e):this.token==="d"?s+1:this.token==="ddd"?this.locales.weekdaysShort[s]:this.token==="dddd"?this.locales.weekdays[s]:e}}var cr=lr;const ur=J;class hr extends ur{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}}var dr=hr;const fr=J;class pr extends fr{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}var mr=pr;const gr=J;class vr extends gr{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}}var br=vr;const wr=J;class yr extends wr{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),s=this.token.length;return s===2?String(e+1).padStart(2,"0"):s===3?this.locales.monthsShort[e]:s===4?this.locales.months[e]:String(e+1)}}var $r=yr;const Er=J;class Sr extends Er{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}}var xr=Sr;const _r=J;class Cr extends _r{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?e.substr(-2):e}}var Or=Cr,Tr={DatePart:J,Meridiem:nr,Day:cr,Hours:dr,Milliseconds:mr,Minutes:br,Month:$r,Seconds:xr,Year:Or};const Ne=B,Pr=q,{style:Et,clear:St,figures:Dr}=V,{erase:Fr,cursor:xt}=H,{DatePart:_t,Meridiem:Ar,Day:Mr,Hours:jr,Milliseconds:Ir,Minutes:Lr,Month:Nr,Seconds:Rr,Year:kr}=Tr,Br=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,Ct={1:({token:t})=>t.replace(/\\(.)/g,"$1"),2:t=>new Mr(t),3:t=>new Nr(t),4:t=>new kr(t),5:t=>new Ar(t),6:t=>new jr(t),7:t=>new Lr(t),8:t=>new Rr(t),9:t=>new Ir(t)},Hr={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class Vr extends Pr{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(Hr,e.locales),this._date=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=St("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(e){e&&this._date.setTime(e.getTime())}set mask(e){let s;for(this.parts=[];s=Br.exec(e);){let n=s.shift(),o=s.findIndex(r=>r!=null);this.parts.push(o in Ct?Ct[o]({token:s[o]||n,date:this.date,parts:this.parts,locales:this.locales}):s[o]||n)}let i=this.parts.reduce((n,o)=>(typeof o=="string"&&typeof n[n.length-1]=="string"?n[n.length-1]+=o:n.push(o),n),[]);this.parts.splice(0),this.parts.push(...i),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex(e=>e instanceof _t)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(e==null)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex(s=>s instanceof _t)),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(xt.hide):this.out.write(St(this.outputText,this.out.columns)),super.render(),this.outputText=[Et.symbol(this.done,this.aborted),Ne.bold(this.msg),Et.delimiter(!1),this.parts.reduce((e,s,i)=>e.concat(i===this.cursor&&!this.done?Ne.cyan().underline(s.toString()):s),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((e,s,i)=>e+`
${i?" ":Dr.pointerSmall} ${Ne.red().italic(s)}`,"")),this.out.write(Fr.line+xt.to(0)+this.outputText))}}var Wr=Vr;const xe=B,Yr=q,{cursor:_e,erase:Ur}=H,{style:Re,figures:Jr,clear:Ot,lines:zr}=V,Gr=/[0-9]/,ke=t=>t!==void 0,Tt=(t,e)=>{let s=Math.pow(10,e);return Math.round(t*s)/s};class Xr extends Yr{constructor(e={}){super(e),this.transform=Re.render(e.style),this.msg=e.message,this.initial=ke(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=ke(e.min)?e.min:-1/0,this.max=ke(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(e){!e&&e!==0?(this.placeholder=!0,this.rendered=xe.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${Tt(e,this.round)}`),this._value=Tt(e,this.round)),this.fire()}get value(){return this._value}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return e==="-"||e==="."&&this.float||Gr.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=e!==""?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let e=await this.validator(this.value);typeof e=="string"&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let e=this.value;this.value=e!==""?e:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(e.length===0)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,s){if(!this.valid(e))return this.bell();const i=Date.now();if(i-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=i,this.color="cyan",e===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(_e.down(zr(this.outputError,this.out.columns)-1)+Ot(this.outputError,this.out.columns)),this.out.write(Ot(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[Re.symbol(this.done,this.aborted),xe.bold(this.msg),Re.delimiter(this.done),!this.done||!this.done&&!this.placeholder?xe[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((e,s,i)=>e+`
${i?" ":Jr.pointerSmall} ${xe.red().italic(s)}`,"")),this.out.write(Ur.line+_e.to(0)+this.outputText+_e.save+this.outputError+_e.restore))}}var qr=Xr;const W=B,{cursor:Kr}=H,Zr=q,{clear:Pt,figures:K,style:Dt,wrap:Qr,entriesToDisplay:en}=V;class tn extends Zr{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map((s,i)=>(typeof s=="string"&&(s={title:s,value:i}),{title:s&&(s.title||s.value||s),description:s&&s.description,value:s&&(s.value===void 0?i:s.value),selected:s&&s.selected,disabled:s&&s.disabled})),this.clear=Pt("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map(e=>!e.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(e=>e.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const e=this.value.filter(s=>s.selected);this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(s=>s.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const e=!this.value[this.cursor].selected;this.value.filter(s=>!s.disabled).forEach(s=>s.selected=e),this.render()}_(e,s){if(e===" ")this.handleSpaceToggle();else if(e==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${K.arrowUp}/${K.arrowDown}: Highlight option
    ${K.arrowLeft}/${K.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(e,s,i,n){const o=(s.selected?W.green(K.radioOn):K.radioOff)+" "+n+" ";let r,h;return s.disabled?r=e===i?W.gray().underline(s.title):W.strikethrough().gray(s.title):(r=e===i?W.cyan().underline(s.title):s.title,e===i&&s.description&&(h=` - ${s.description}`,(o.length+r.length+h.length>=this.out.columns||s.description.split(/\r?\n/).length>1)&&(h=`
`+Qr(s.description,{margin:o.length,width:this.out.columns})))),o+r+W.gray(h||"")}paginateOptions(e){if(e.length===0)return W.red("No matches for this query.");let{startIndex:s,endIndex:i}=en(this.cursor,e.length,this.optionsPerPage),n,o=[];for(let r=s;r<i;r++)r===s&&s>0?n=K.arrowUp:r===i-1&&i<e.length?n=K.arrowDown:n=" ",o.push(this.renderOption(this.cursor,e[r],r,n));return`
`+o.join(`
`)}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter(s=>s.selected).map(s=>s.title).join(", ");const e=[W.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&e.push(W.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(Kr.hide),super.render();let e=[Dt.symbol(this.done,this.aborted),W.bold(this.msg),Dt.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=W.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.value),this.out.write(this.clear+e),this.clear=Pt(e,this.out.columns)}}var Ft=tn;const me=B,sn=q,{erase:rn,cursor:At}=H,{style:Be,clear:Mt,figures:He,wrap:nn,entriesToDisplay:on}=V,jt=(t,e)=>t[e]&&(t[e].value||t[e].title||t[e]),an=(t,e)=>t[e]&&(t[e].title||t[e].value||t[e]),ln=(t,e)=>{const s=t.findIndex(i=>i.value===e||i.title===e);return s>-1?s:void 0};class cn extends sn{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial=typeof e.initial=="number"?e.initial:ln(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=Be.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=Mt("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this._fb=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return typeof this._fb=="number"?e=this.choices[this._fb]:typeof this._fb=="string"&&(e={title:this._fb}),e||this._fb||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=jt(this.suggestions,e):this.value=this.fallback.value,this.fire()}async complete(e){const s=this.completing=this.suggest(this.input,this.choices),i=await s;if(this.completing!==s)return;this.suggestions=i.map((o,r,h)=>({title:an(h,r),value:jt(h,r),description:o.description})),this.completing=!1;const n=Math.max(i.length-1,0);this.moveSelect(Math.min(n,this.select)),e&&e()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,s){let i=this.input.slice(0,this.cursor),n=this.input.slice(this.cursor);this.input=`${i}${e}${n}`,this.cursor=i.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let e=this.input.slice(0,this.cursor-1),s=this.input.slice(this.cursor);this.input=`${e}${s}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),s=this.input.slice(this.cursor+1);this.input=`${e}${s}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(e,s,i,n){let o,r=i?He.arrowUp:n?He.arrowDown:" ",h=s?me.cyan().underline(e.title):e.title;return r=(s?me.cyan(He.pointer)+" ":"  ")+r,e.description&&(o=` - ${e.description}`,(r.length+h.length+o.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(o=`
`+nn(e.description,{margin:3,width:this.out.columns}))),r+" "+h+me.gray(o||"")}render(){if(this.closed)return;this.firstRender?this.out.write(At.hide):this.out.write(Mt(this.outputText,this.out.columns)),super.render();let{startIndex:e,endIndex:s}=on(this.select,this.choices.length,this.limit);if(this.outputText=[Be.symbol(this.done,this.aborted,this.exited),me.bold(this.msg),Be.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const i=this.suggestions.slice(e,s).map((n,o)=>this.renderOption(n,this.select===o+e,o===0&&e>0,o+e===s-1&&s<this.choices.length)).join(`
`);this.outputText+=`
`+(i||me.gray(this.fallback.title))}this.out.write(rn.line+At.to(0)+this.outputText)}}var un=cn;const z=B,{cursor:hn}=H,dn=Ft,{clear:It,style:Lt,figures:oe}=V;class fn extends dn{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=It("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(e=>e.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(i=>this.inputValue?!!(typeof i.title=="string"&&i.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof i.value=="string"&&i.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const s=this.filteredOptions.findIndex(i=>i===e);this.cursor=s<0?0:s,this.render()}handleSpaceToggle(){const e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter(s=>s.selected).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,s){e===" "?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${oe.arrowUp}/${oe.arrowDown}: Highlight option
    ${oe.arrowLeft}/${oe.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:z.gray("Enter something to filter")}
`}renderOption(e,s,i){let n;return s.disabled?n=e===i?z.gray().underline(s.title):z.strikethrough().gray(s.title):n=e===i?z.cyan().underline(s.title):s.title,(s.selected?z.green(oe.radioOn):oe.radioOff)+"  "+n}renderDoneOrInstructions(){if(this.done)return this.value.filter(s=>s.selected).map(s=>s.title).join(", ");const e=[z.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&e.push(z.yellow(this.warn)),e.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(hn.hide),super.render();let e=[Lt.symbol(this.done,this.aborted),z.bold(this.msg),Lt.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(e+=z.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),e+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+e),this.clear=It(e,this.out.columns)}}var pn=fn;const Nt=B,mn=q,{style:Rt,clear:gn}=V,{erase:vn,cursor:kt}=H;class bn extends mn{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(e,s){return e.toLowerCase()==="y"?(this.value=!0,this.submit()):e.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(kt.hide):this.out.write(gn(this.outputText,this.out.columns)),super.render(),this.outputText=[Rt.symbol(this.done,this.aborted),Nt.bold(this.msg),Rt.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:Nt.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(vn.line+kt.to(0)+this.outputText))}}var wn=bn,yn={TextPrompt:Ui,SelectPrompt:Ki,TogglePrompt:sr,DatePrompt:Wr,NumberPrompt:qr,MultiselectPrompt:Ft,AutocompletePrompt:un,AutocompleteMultiselectPrompt:pn,ConfirmPrompt:wn};(function(t){const e=t,s=yn,i=r=>r;function n(r,h,v={}){return new Promise((c,y)=>{const p=new s[r](h),f=v.onAbort||i,m=v.onSubmit||i,E=v.onExit||i;p.on("state",h.onState||i),p.on("submit",D=>c(m(D))),p.on("exit",D=>c(E(D))),p.on("abort",D=>y(f(D)))})}e.text=r=>n("TextPrompt",r),e.password=r=>(r.style="password",e.text(r)),e.invisible=r=>(r.style="invisible",e.text(r)),e.number=r=>n("NumberPrompt",r),e.date=r=>n("DatePrompt",r),e.confirm=r=>n("ConfirmPrompt",r),e.list=r=>{const h=r.separator||",";return n("TextPrompt",r,{onSubmit:v=>v.split(h).map(c=>c.trim())})},e.toggle=r=>n("TogglePrompt",r),e.select=r=>n("SelectPrompt",r),e.multiselect=r=>{r.choices=[].concat(r.choices||[]);const h=v=>v.filter(c=>c.selected).map(c=>c.value);return n("MultiselectPrompt",r,{onAbort:h,onSubmit:h})},e.autocompleteMultiselect=r=>{r.choices=[].concat(r.choices||[]);const h=v=>v.filter(c=>c.selected).map(c=>c.value);return n("AutocompleteMultiselectPrompt",r,{onAbort:h,onSubmit:h})};const o=(r,h)=>Promise.resolve(h.filter(v=>v.title.slice(0,r.length).toLowerCase()===r.toLowerCase()));e.autocomplete=r=>(r.suggest=r.suggest||o,r.choices=[].concat(r.choices||[]),n("AutocompletePrompt",r))})(ft);const Ve=ft,$n=["suggest","format","onState","validate","onRender","type"],Bt=()=>{};async function Z(t=[],{onSubmit:e=Bt,onCancel:s=Bt}={}){const i={},n=Z._override||{};t=[].concat(t);let o,r,h,v,c,y;const p=async(f,m,E=!1)=>{if(!(!E&&f.validate&&f.validate(m)!==!0))return f.format?await f.format(m,i):m};for(r of t)if({name:v,type:c}=r,typeof c=="function"&&(c=await c(o,{...i},r),r.type=c),!!c){for(let f in r){if($n.includes(f))continue;let m=r[f];r[f]=typeof m=="function"?await m(o,{...i},y):m}if(y=r,typeof r.message!="string")throw new Error("prompt message is required");if({name:v,type:c}=r,Ve[c]===void 0)throw new Error(`prompt type (${c}) is not defined`);if(n[r.name]!==void 0&&(o=await p(r,n[r.name]),o!==void 0)){i[v]=o;continue}try{o=Z._injected?En(Z._injected,r.initial):await Ve[c](r),i[v]=o=await p(r,o,!0),h=await e(r,o,i)}catch{h=!await s(r,i)}if(h)return i}return i}function En(t,e){const s=t.shift();if(s instanceof Error)throw s;return s===void 0?e:s}function Sn(t){Z._injected=(Z._injected||[]).concat(t)}function xn(t){Z._override=Object.assign({},t)}var ge=Object.assign(Z,{prompt:Z,prompts:Ve,inject:Sn,override:xn}),se={exports:{}},We,Ht;function _n(){if(Ht)return We;Ht=1,We=i,i.sync=n;var t=ye;function e(o,r){var h=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!h||(h=h.split(";"),h.indexOf("")!==-1))return!0;for(var v=0;v<h.length;v++){var c=h[v].toLowerCase();if(c&&o.substr(-c.length).toLowerCase()===c)return!0}return!1}function s(o,r,h){return!o.isSymbolicLink()&&!o.isFile()?!1:e(r,h)}function i(o,r,h){t.stat(o,function(v,c){h(v,v?!1:s(c,o,r))})}function n(o,r){return s(t.statSync(o),o,r)}return We}var Ye,Vt;function Cn(){if(Vt)return Ye;Vt=1,Ye=e,e.sync=s;var t=ye;function e(o,r,h){t.stat(o,function(v,c){h(v,v?!1:i(c,r))})}function s(o,r){return i(t.statSync(o),r)}function i(o,r){return o.isFile()&&n(o,r)}function n(o,r){var h=o.mode,v=o.uid,c=o.gid,y=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),p=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),f=parseInt("100",8),m=parseInt("010",8),E=parseInt("001",8),D=f|m,I=h&E||h&m&&c===p||h&f&&v===y||h&D&&y===0;return I}return Ye}var Ce;process.platform==="win32"||ks.TESTING_WINDOWS?Ce=_n():Ce=Cn();var On=Ue;Ue.sync=Tn;function Ue(t,e,s){if(typeof e=="function"&&(s=e,e={}),!s){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,n){Ue(t,e||{},function(o,r){o?n(o):i(r)})})}Ce(t,e||{},function(i,n){i&&(i.code==="EACCES"||e&&e.ignoreErrors)&&(i=null,n=!1),s(i,n)})}function Tn(t,e){try{return Ce.sync(t,e||{})}catch(s){if(e&&e.ignoreErrors||s.code==="EACCES")return!1;throw s}}const ae=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Wt=we,Pn=ae?";":":",Yt=On,Ut=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),Jt=(t,e)=>{const s=e.colon||Pn,i=t.match(/\//)||ae&&t.match(/\\/)?[""]:[...ae?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(s)],n=ae?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=ae?n.split(s):[""];return ae&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:i,pathExt:o,pathExtExe:n}},zt=(t,e,s)=>{typeof e=="function"&&(s=e,e={}),e||(e={});const{pathEnv:i,pathExt:n,pathExtExe:o}=Jt(t,e),r=[],h=c=>new Promise((y,p)=>{if(c===i.length)return e.all&&r.length?y(r):p(Ut(t));const f=i[c],m=/^".*"$/.test(f)?f.slice(1,-1):f,E=Wt.join(m,t),D=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+E:E;y(v(D,c,0))}),v=(c,y,p)=>new Promise((f,m)=>{if(p===n.length)return f(h(y+1));const E=n[p];Yt(c+E,{pathExt:o},(D,I)=>{if(!D&&I)if(e.all)r.push(c+E);else return f(c+E);return f(v(c,y,p+1))})});return s?h(0).then(c=>s(null,c),s):h(0)},Dn=(t,e)=>{e=e||{};const{pathEnv:s,pathExt:i,pathExtExe:n}=Jt(t,e),o=[];for(let r=0;r<s.length;r++){const h=s[r],v=/^".*"$/.test(h)?h.slice(1,-1):h,c=Wt.join(v,t),y=!v&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let p=0;p<i.length;p++){const f=y+i[p];try{if(Yt.sync(f,{pathExt:n}))if(e.all)o.push(f);else return f}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw Ut(t)};var Fn=zt;zt.sync=Dn;var Je={exports:{}};const Gt=(t={})=>{const e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Je.exports=Gt,Je.exports.default=Gt;const Xt=we,An=Fn,Mn=Je.exports;function qt(t,e){const s=t.options.env||process.env,i=process.cwd(),n=t.options.cwd!=null,o=n&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let r;try{r=An.sync(t.command,{path:s[Mn({env:s})],pathExt:e?Xt.delimiter:void 0})}catch{}finally{o&&process.chdir(i)}return r&&(r=Xt.resolve(n?t.options.cwd:"",r)),r}function jn(t){return qt(t)||qt(t,!0)}var In=jn,ze={};const Ge=/([()\][%!^"`<>&|;, *?])/g;function Ln(t){return t=t.replace(Ge,"^$1"),t}function Nn(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(Ge,"^$1"),e&&(t=t.replace(Ge,"^$1")),t}ze.command=Ln,ze.argument=Nn;var Rn=/^#!(.*)/;const kn=Rn;var Bn=(t="")=>{const e=t.match(kn);if(!e)return null;const[s,i]=e[0].replace(/#! ?/,"").split(" "),n=s.split("/").pop();return n==="env"?i:i?`${n} ${i}`:n};const Xe=ye,Hn=Bn;function Vn(t){const s=Buffer.alloc(150);let i;try{i=Xe.openSync(t,"r"),Xe.readSync(i,s,0,150,0),Xe.closeSync(i)}catch{}return Hn(s.toString())}var Wn=Vn;const Yn=we,Kt=In,Zt=ze,Un=Wn,Jn=process.platform==="win32",zn=/\.(?:com|exe)$/i,Gn=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Xn(t){t.file=Kt(t);const e=t.file&&Un(t.file);return e?(t.args.unshift(t.file),t.command=e,Kt(t)):t.file}function qn(t){if(!Jn)return t;const e=Xn(t),s=!zn.test(e);if(t.options.forceShell||s){const i=Gn.test(e);t.command=Yn.normalize(t.command),t.command=Zt.command(t.command),t.args=t.args.map(o=>Zt.argument(o,i));const n=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${n}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function Kn(t,e,s){e&&!Array.isArray(e)&&(s=e,e=null),e=e?e.slice(0):[],s=Object.assign({},s);const i={command:t,args:e,options:s,file:void 0,original:{command:t,args:e}};return s.shell?i:qn(i)}var Zn=Kn;const qe=process.platform==="win32";function Ke(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function Qn(t,e){if(!qe)return;const s=t.emit;t.emit=function(i,n){if(i==="exit"){const o=Qt(n,e);if(o)return s.call(t,"error",o)}return s.apply(t,arguments)}}function Qt(t,e){return qe&&t===1&&!e.file?Ke(e.original,"spawn"):null}function eo(t,e){return qe&&t===1&&!e.file?Ke(e.original,"spawnSync"):null}var to={hookChildProcess:Qn,verifyENOENT:Qt,verifyENOENTSync:eo,notFoundError:Ke};const es=js,Ze=Zn,Qe=to;function ts(t,e,s){const i=Ze(t,e,s),n=es.spawn(i.command,i.args,i.options);return Qe.hookChildProcess(n,i),n}function so(t,e,s){const i=Ze(t,e,s),n=es.spawnSync(i.command,i.args,i.options);return n.error=n.error||Qe.verifyENOENTSync(n.status,i),n}se.exports=ts,se.exports.spawn=ts,se.exports.sync=so,se.exports._parse=Ze,se.exports._enoent=Qe;var ss={},is={};(function(t){var e=/[|\\{}()[\]^$+*?.]/g,s=Object.prototype.hasOwnProperty,i=function(c,y){return s.apply(c,[y])};t.escapeRegExpChars=function(c){return c?String(c).replace(e,"\\$&"):""};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},o=/[&<>'"]/g;function r(c){return n[c]||c}var h=`var _ENCODE_HTML_RULES = {
      "&": "&amp;"
    , "<": "&lt;"
    , ">": "&gt;"
    , '"': "&#34;"
    , "'": "&#39;"
    }
  , _MATCH_HTML = /[&<>'"]/g;
function encode_char(c) {
  return _ENCODE_HTML_RULES[c] || c;
};
`;t.escapeXML=function(c){return c==null?"":String(c).replace(o,r)};function v(){return Function.prototype.toString.call(this)+`;
`+h}try{typeof Object.defineProperty=="function"?Object.defineProperty(t.escapeXML,"toString",{value:v}):t.escapeXML.toString=v}catch{console.warn("Unable to set escapeXML.toString (is the Function prototype frozen?)")}t.shallowCopy=function(c,y){if(y=y||{},c!=null)for(var p in y)!i(y,p)||p==="__proto__"||p==="constructor"||(c[p]=y[p]);return c},t.shallowCopyFromList=function(c,y,p){if(p=p||[],y=y||{},c!=null)for(var f=0;f<p.length;f++){var m=p[f];if(typeof y[m]<"u"){if(!i(y,m)||m==="__proto__"||m==="constructor")continue;c[m]=y[m]}}return c},t.cache={_data:{},set:function(c,y){this._data[c]=y},get:function(c){return this._data[c]},remove:function(c){delete this._data[c]},reset:function(){this._data={}}},t.hyphenToCamel=function(c){return c.replace(/-[a-z]/g,function(y){return y[1].toUpperCase()})},t.createNullProtoObjWherePossible=function(){return typeof Object.create=="function"?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}}}()})(is);const rs="ejs",ns="Embedded JavaScript templates",os=["template","engine","ejs"],as="3.1.9",ls="Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",cs="Apache-2.0",us={ejs:"./bin/cli.js"},hs="./lib/ejs.js",ds="ejs.min.js",fs="ejs.min.js",ps={type:"git",url:"git://github.com/mde/ejs.git"},ms="https://github.com/mde/ejs/issues",gs="https://github.com/mde/ejs",vs={jake:"^10.8.5"},bs={browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^4.0.2","lru-cache":"^4.0.1",mocha:"^10.2.0","uglify-js":"^3.3.16"},ws={node:">=0.10.0"},ys={test:"mocha -u tdd"},io={name:rs,description:ns,keywords:os,version:as,author:ls,license:cs,bin:us,main:hs,jsdelivr:ds,unpkg:fs,repository:ps,bugs:ms,homepage:gs,dependencies:vs,devDependencies:bs,engines:ws,scripts:ys},ro={__proto__:null,name:rs,description:ns,keywords:os,version:as,author:ls,license:cs,bin:us,main:hs,jsdelivr:ds,unpkg:fs,repository:ps,bugs:ms,homepage:gs,dependencies:vs,devDependencies:bs,engines:ws,scripts:ys,default:io},no=Bs(ro);(function(t){/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var e=ye,s=we,i=is,n=!1,o=no.version,r="<",h=">",v="%",c="locals",y="ejs",p="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",f=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],m=f.concat("cache"),E=/^\uFEFF/,D=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;t.cache=i.cache,t.fileLoader=e.readFileSync,t.localsName=c,t.promiseImpl=new Function("return this;")().Promise,t.resolveInclude=function(l,u,a){var d=s.dirname,b=s.extname,T=s.resolve,j=T(a?u:d(u),l),X=b(l);return X||(j+=".ejs"),j};function I(l,u){var a;if(u.some(function(d){return a=t.resolveInclude(l,d,!0),e.existsSync(a)}))return a}function M(l,u){var a,d,b=u.views,T=/^[A-Za-z]+:\\|^\//.exec(l);if(T&&T.length)l=l.replace(/^\/*/,""),Array.isArray(u.root)?a=I(l,u.root):a=t.resolveInclude(l,u.root||"/",!0);else if(u.filename&&(d=t.resolveInclude(l,u.filename),e.existsSync(d)&&(a=d)),!a&&Array.isArray(b)&&(a=I(l,b)),!a&&typeof u.includer!="function")throw new Error('Could not find the include file "'+u.escapeFunction(l)+'"');return a}function L(l,u){var a,d=l.filename,b=arguments.length>1;if(l.cache){if(!d)throw new Error("cache option requires a filename");if(a=t.cache.get(d),a)return a;b||(u=w(d).toString().replace(E,""))}else if(!b){if(!d)throw new Error("Internal EJS error: no file name or template provided");u=w(d).toString().replace(E,"")}return a=t.compile(u,l),l.cache&&t.cache.set(d,a),a}function A(l,u,a){var d;if(a){try{d=L(l)(u)}catch(b){return a(b)}a(null,d)}else{if(typeof t.promiseImpl=="function")return new t.promiseImpl(function(b,T){try{d=L(l)(u),b(d)}catch(j){T(j)}});throw new Error("Please provide a callback function")}}function w(l){return t.fileLoader(l)}function g(l,u){var a=i.shallowCopy(i.createNullProtoObjWherePossible(),u);if(a.filename=M(l,a),typeof u.includer=="function"){var d=u.includer(l,a.filename);if(d&&(d.filename&&(a.filename=d.filename),d.template))return L(a,d.template)}return L(a)}function x(l,u,a,d,b){var T=u.split(`
`),j=Math.max(d-3,0),X=Math.min(T.length,d+3),k=b(a),Q=T.slice(j,X).map(function(le,be){var ce=be+j+1;return(ce==d?" >> ":"    ")+ce+"| "+le}).join(`
`);throw l.path=k,l.message=(k||"ejs")+":"+d+`
`+Q+`

`+l.message,l}function $(l){return l.replace(/;(\s*$)/,"$1")}t.compile=function(u,a){var d;return a&&a.scope&&(n||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),n=!0),a.context||(a.context=a.scope),delete a.scope),d=new _(u,a),d.compile()},t.render=function(l,u,a){var d=u||i.createNullProtoObjWherePossible(),b=a||i.createNullProtoObjWherePossible();return arguments.length==2&&i.shallowCopyFromList(b,d,f),L(b,l)(d)},t.renderFile=function(){var l=Array.prototype.slice.call(arguments),u=l.shift(),a,d={filename:u},b,T;return typeof arguments[arguments.length-1]=="function"&&(a=l.pop()),l.length?(b=l.shift(),l.length?i.shallowCopy(d,l.pop()):(b.settings&&(b.settings.views&&(d.views=b.settings.views),b.settings["view cache"]&&(d.cache=!0),T=b.settings["view options"],T&&i.shallowCopy(d,T)),i.shallowCopyFromList(d,b,m)),d.filename=u):b=i.createNullProtoObjWherePossible(),A(d,b,a)},t.Template=_,t.clearCache=function(){t.cache.reset()};function _(l,u){u=u||i.createNullProtoObjWherePossible();var a=i.createNullProtoObjWherePossible();this.templateText=l,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",a.client=u.client||!1,a.escapeFunction=u.escape||u.escapeFunction||i.escapeXML,a.compileDebug=u.compileDebug!==!1,a.debug=!!u.debug,a.filename=u.filename,a.openDelimiter=u.openDelimiter||t.openDelimiter||r,a.closeDelimiter=u.closeDelimiter||t.closeDelimiter||h,a.delimiter=u.delimiter||t.delimiter||v,a.strict=u.strict||!1,a.context=u.context,a.cache=u.cache||!1,a.rmWhitespace=u.rmWhitespace,a.root=u.root,a.includer=u.includer,a.outputFunctionName=u.outputFunctionName,a.localsName=u.localsName||t.localsName||c,a.views=u.views,a.async=u.async,a.destructuredLocals=u.destructuredLocals,a.legacyInclude=typeof u.legacyInclude<"u"?!!u.legacyInclude:!0,a.strict?a._with=!1:a._with=typeof u._with<"u"?u._with:!0,this.opts=a,this.regex=this.createRegex()}_.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},_.prototype={createRegex:function(){var l=p,u=i.escapeRegExpChars(this.opts.delimiter),a=i.escapeRegExpChars(this.opts.openDelimiter),d=i.escapeRegExpChars(this.opts.closeDelimiter);return l=l.replace(/%/g,u).replace(/</g,a).replace(/>/g,d),new RegExp(l)},compile:function(){var l,u,a=this.opts,d="",b="",T=a.escapeFunction,j,X=a.filename?JSON.stringify(a.filename):"undefined";if(!this.source){if(this.generateSource(),d+=`  var __output = "";
  function __append(s) { if (s !== undefined && s !== null) __output += s }
`,a.outputFunctionName){if(!D.test(a.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");d+="  var "+a.outputFunctionName+` = __append;
`}if(a.localsName&&!D.test(a.localsName))throw new Error("localsName is not a valid JS identifier.");if(a.destructuredLocals&&a.destructuredLocals.length){for(var k="  var __locals = ("+a.localsName+` || {}),
`,Q=0;Q<a.destructuredLocals.length;Q++){var le=a.destructuredLocals[Q];if(!D.test(le))throw new Error("destructuredLocals["+Q+"] is not a valid JS identifier.");Q>0&&(k+=`,
  `),k+=le+" = __locals."+le}d+=k+`;
`}a._with!==!1&&(d+="  with ("+a.localsName+` || {}) {
`,b+=`  }
`),b+=`  return __output;
`,this.source=d+this.source+b}a.compileDebug?l=`var __line = 1
  , __lines = `+JSON.stringify(this.templateText)+`
  , __filename = `+X+`;
try {
`+this.source+`} catch (e) {
  rethrow(e, __lines, __filename, __line, escapeFn);
}
`:l=this.source,a.client&&(l="escapeFn = escapeFn || "+T.toString()+`;
`+l,a.compileDebug&&(l="rethrow = rethrow || "+x.toString()+`;
`+l)),a.strict&&(l=`"use strict";
`+l),a.debug&&console.log(l),a.compileDebug&&a.filename&&(l=l+`
//# sourceURL=`+X+`
`);try{if(a.async)try{j=new Function("return (async function(){}).constructor;")()}catch(N){throw N instanceof SyntaxError?new Error("This environment does not support async/await"):N}else j=Function;u=new j(a.localsName+", escapeFn, include, rethrow",l)}catch(N){throw N instanceof SyntaxError&&(a.filename&&(N.message+=" in "+a.filename),N.message+=` while compiling ejs

`,N.message+=`If the above error is not helpful, you may want to try EJS-Lint:
`,N.message+="https://github.com/RyanZim/EJS-Lint",a.async||(N.message+=`
`,N.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),N}var be=a.client?u:function(st){var Ds=function(Fs,it){var Pe=i.shallowCopy(i.createNullProtoObjWherePossible(),st);return it&&(Pe=i.shallowCopy(Pe,it)),g(Fs,a)(Pe)};return u.apply(a.context,[st||i.createNullProtoObjWherePossible(),T,Ds,x])};if(a.filename&&typeof Object.defineProperty=="function"){var ce=a.filename,Ps=s.basename(ce,s.extname(ce));try{Object.defineProperty(be,"name",{value:Ps,writable:!1,enumerable:!1,configurable:!0})}catch{}}return be},generateSource:function(){var l=this.opts;l.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,`
`).replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var u=this,a=this.parseTemplateText(),d=this.opts.delimiter,b=this.opts.openDelimiter,T=this.opts.closeDelimiter;a&&a.length&&a.forEach(function(j,X){var k;if(j.indexOf(b+d)===0&&j.indexOf(b+d+d)!==0&&(k=a[X+2],!(k==d+T||k=="-"+d+T||k=="_"+d+T)))throw new Error('Could not find matching close tag for "'+j+'".');u.scanLine(j)})},parseTemplateText:function(){for(var l=this.templateText,u=this.regex,a=u.exec(l),d=[],b;a;)b=a.index,b!==0&&(d.push(l.substring(0,b)),l=l.slice(b)),d.push(a[0]),l=l.slice(a[0].length),a=u.exec(l);return l&&d.push(l),d},_addOutput:function(l){if(this.truncate&&(l=l.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!l)return l;l=l.replace(/\\/g,"\\\\"),l=l.replace(/\n/g,"\\n"),l=l.replace(/\r/g,"\\r"),l=l.replace(/"/g,'\\"'),this.source+='    ; __append("'+l+`")
`},scanLine:function(l){var u=this,a=this.opts.delimiter,d=this.opts.openDelimiter,b=this.opts.closeDelimiter,T=0;switch(T=l.split(`
`).length-1,l){case d+a:case d+a+"_":this.mode=_.modes.EVAL;break;case d+a+"=":this.mode=_.modes.ESCAPED;break;case d+a+"-":this.mode=_.modes.RAW;break;case d+a+"#":this.mode=_.modes.COMMENT;break;case d+a+a:this.mode=_.modes.LITERAL,this.source+='    ; __append("'+l.replace(d+a+a,d+a)+`")
`;break;case a+a+b:this.mode=_.modes.LITERAL,this.source+='    ; __append("'+l.replace(a+a+b,a+b)+`")
`;break;case a+b:case"-"+a+b:case"_"+a+b:this.mode==_.modes.LITERAL&&this._addOutput(l),this.mode=null,this.truncate=l.indexOf("-")===0||l.indexOf("_")===0;break;default:if(this.mode){switch(this.mode){case _.modes.EVAL:case _.modes.ESCAPED:case _.modes.RAW:l.lastIndexOf("//")>l.lastIndexOf(`
`)&&(l+=`
`)}switch(this.mode){case _.modes.EVAL:this.source+="    ; "+l+`
`;break;case _.modes.ESCAPED:this.source+="    ; __append(escapeFn("+$(l)+`))
`;break;case _.modes.RAW:this.source+="    ; __append("+$(l)+`)
`;break;case _.modes.COMMENT:break;case _.modes.LITERAL:this._addOutput(l);break}}else this._addOutput(l)}u.opts.compileDebug&&T&&(this.currentLine+=T,this.source+="    ; __line = "+this.currentLine+`
`)}},t.escapeXML=i.escapeXML,t.__express=t.renderFile,t.VERSION=o,t.name=y,typeof window<"u"&&(window.ejs=t)})(ss);const oo={env:{browser:!0,es2021:!0,node:!0},extends:["eslint:recommended","plugin:vue/vue3-essential"],overrides:[],parserOptions:{ecmaVersion:6,sourceType:"module"},plugins:["vue"],rules:{}},ao={env:{browser:!0,es2021:!0,node:!0},extends:["plugin:vue/vue3-essential","standard-with-typescript"],overrides:[],parserOptions:{ecmaVersion:"latest",sourceType:"module",project:["./tsconfig.json"]},plugins:["vue"],rules:{}},lo={env:{browser:!0,es2021:!0,node:!0},extends:["plugin:react/recommended","standard"],overrides:[],parserOptions:{ecmaVersion:"latest",sourceType:"module"},plugins:["react"],rules:{}},co={env:{browser:!0,es2021:!0,node:!0},extends:["plugin:react/recommended","standard-with-typescript"],overrides:[],parserOptions:{ecmaVersion:"latest",sourceType:"module",project:["./tsconfig.json"]},plugins:["react"],rules:{}},uo={vue:["./src/**/*.js","./src/*.js","./src/**/*.vue"],vue_ts:["./src/**/*.ts","./src/*.ts","./src/**/*.vue"],react:["./src/**/*.jsx","./src/*.jsx","./src/**/*.ts","./src/*.ts"],react_ts:["./src/**/*.tsx","./src/*.tsx","./src/**/*.ts","./src/*.ts"]},ie=process.cwd(),ve=F.join(ie,"sp.config.json"),$s=F.dirname(rt(import.meta.url));async function ho(t,e={},s={}){return new Promise((i,n)=>{ss.renderFile(t,{data:e},s,(o,r)=>{if(o){n(o);return}i(r)})})}const Es=t=>{if(O.existsSync(t))return!0;if(Es(F.dirname(t)))return O.mkdirSync(t),!0},fo=(t,e)=>{if(O.existsSync(t)){console.log("the file already exists~");return}return O.promises.writeFile(t,e)};async function po(t,e,s,i){const n=F.resolve($s,s),o=e+`/${i}`,r=await ho(n,{name:t,lowerName:t.toLowerCase(),cpnPath:o});Es(e);const h=F.resolve(e,i);fo(h,r)}async function mo(t,e,s){const i="../tep-ejs/component_"+s+".ejs",n=s.includes("vue")?"vue":s.includes("ts")?"ts":"js",o=`${t}.${n}`;po(t,e,i,o)}function Ss(t){return t?.trim().replace(/\/+$/g,"")}function go(t){const e=O.readdirSync(t);return e.length===0||e.length===1&&e[0]===".git"}function xs(t){return/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/.test(t)}function vo(t){return t.trim().toLowerCase().replace(/\s+/g,"-").replace(/^[._]/,"").replace(/[^a-z0-9-~]+/g,"-")}function _s(t){if(O.existsSync(t))for(const e of O.readdirSync(t))e!==".git"&&O.rmSync(F.resolve(t,e),{recursive:!0,force:!0})}function bo(t){if(!t)return;const e=t.split(" ")[0].split("/");return{name:e[0],version:e[1]}}function Cs(t,e){O.statSync(t).isDirectory()?wo(t,e):O.copyFileSync(t,e)}function wo(t,e){O.mkdirSync(e,{recursive:!0});for(const s of O.readdirSync(t)){const i=F.resolve(t,s),n=F.resolve(e,s);Cs(i,n)}}function Oe(){O.existsSync(ve)||Os();const t=O.readFileSync(ve,"utf8");return JSON.parse(t)}function Os(t){console.log(t?"\u6B63\u5728\u521D\u59CB\u5316\u914D\u7F6E\u6587\u4EF6sp.config.json":"\u5728\u6B64\u8DEF\u5F84\u4E0A\u6CA1\u6709\u627E\u5230sp.config.json,\u5F00\u59CB\u521D\u59CB\u5316\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\u3002"),O.copyFileSync(F.resolve($s,"../tep-config/sp.config.json"),ve)}function R(t,e,s){try{const i=Is();i.start(`${s}: \u547D\u4EE4\u6267\u884C\u4E2D...
`);const{stdout:n}=se.exports.sync(t,e,{});n.toString()&&console.log(Ys("sp-cli-info "),n.toString()),i.succeed(`${s}: \u547D\u4EE4\u6267\u884C\u5B8C\u6210`)}catch(i){console.log(ht(i)),process.exit(1)}}function yo(t){switch(t){case"vue":R("npm",["install","-D","eslint-plugin-vue"],"\u5B89\u88C5eslint-plugin-vue"),R("npm",["install","-D","eslint"],"\u5B89\u88C5eslint");break;case"vue_ts":R("npm",["install","-D","eslint-plugin-vue@latest","eslint-config-standard-with-typescript@latest","@typescript-eslint/eslint-plugin@^5.43.0","eslint@^8.0.1","eslint-plugin-import@^2.25.2","eslint-plugin-n@^15.0.0","eslint-plugin-promise@^6.0.0","typescript@*"],"\u5B89\u88C5vue+ts\u76F8\u5173\u4F9D\u8D56");break;case"react":R("npm",["install","-D","eslint-plugin-react@latest","eslint-config-standard@latest","eslint@^8.0.1","eslint-plugin-import@^2.25.2","eslint-plugin-n@^15.0.0","eslint-plugin-promise@^6.0.0"],"\u5B89\u88C5react\u76F8\u5173\u4F9D\u8D56");break;case"react_ts":R("npm",["install","-D","eslint-plugin-react@latest","eslint-config-standard-with-typescript@latest","@typescript-eslint/eslint-plugin@^5.43.0","eslint@^8.0.1","eslint-plugin-import@^2.25.2","eslint-plugin-n@^15.0.0","eslint-plugin-promise@^6.0.0","typescript@*"],"\u5B89\u88C5react+ts\u76F8\u5173\u4F9D\u8D56"),console.log("wait......");break;default:console.log(`Sorry, we are out of ${t}.`)}}function $o(t){const e=Oe(),s=Object.assign({},e),i={vue:oo,vue_ts:ao,react:lo,react_ts:co};for(const n in i)n===t&&(s.esLint=i[n],s.lintFilesArr=uo[n]);O.writeFileSync(ve,JSON.stringify(s,null,2))}function Eo(t){const e=et(t,"problems"),s=et(t,"errors"),i=et(t,"warnings");return{problems:+e||0,errors:+s||0,warnings:+i||0}}function et(t,e){const s=/([0-9]+) problems/,i=/([0-9]+) warnings/,n=/([0-9]+) errors/;switch(e){case"problems":return t.match(s)[0].match(/[0-9]+/)[0];case"warnings":return t.match(i)[0].match(/[0-9]+/)[0];case"errors":return t.match(n)[0].match(/[0-9]+/)[0];default:console.log(dt("\u5F53\u524D\u9879\u76EE\u6CA1\u6709\u68C0\u6D4B\u51FA\u9519\u8BEF"));return}}const tt=[{name:"vue",display:"Vue",color:he,variants:[{name:"vue",display:"JavaScript",color:ct},{name:"vue-ts",display:"TypeScript",color:ut},{name:"custom-create-vue",display:"Customize with create-vue",color:he,customCommand:"npm create vue@latest TARGET_DIR"}]},{name:"react",display:"React",color:Ws,variants:[{name:"react",display:"JavaScript",color:ct},{name:"react-ts",display:"TypeScript",color:ut}]}],Ts=tt.map(t=>t.variants&&t.variants.map(e=>e.name)||[t.name]).reduce((t,e)=>t.concat(e),[]),So={_gitignore:".gitignore"};async function xo(t){const e="my-project",s=Ss(t._[0]),i=t.template||t.t;let n=s||e;const o=()=>n==="."?F.basename(F.resolve()):n;let r;try{r=await ge([{type:s?null:"text",name:"projectName",message:ue("Project name:"),initial:e,onState:g=>{n=Ss(g.value)||e}},{type:()=>!O.existsSync(n)||go(n)?null:"confirm",name:"overwrite",message:()=>(n==="."?"Current directory":`Target directory "${n}"`)+" is not empty. Remove existing files and continue?"},{type:(g,{overwrite:x})=>{if(x===!1)throw new Error(De("\u2716")+" Operation cancelled");return null},name:"overwriteChecker"},{type:()=>xs(o())?null:"text",name:"packageName",message:ue("Package name:"),initial:()=>vo(o()),validate:g=>xs(g)||"Invalid package.json name"},{type:i&&Ts.includes(i)?null:"select",name:"framework",message:typeof i=="string"&&!Ts.includes(i)?ue(`"${i}" isn't a valid template. Please choose from below: `):ue("Select a framework:"),initial:0,choices:tt.map(g=>{const x=g.color;return{title:x(g.display||g.name),value:g}})},{type:g=>g&&g.variants?"select":null,name:"variant",message:ue("Select a variant:"),choices:g=>g.variants.map(x=>{const $=x.color;return{title:$(x.display||x.name),value:x.name}})}],{onCancel:()=>{throw new Error(De("\u2716")+" Operation cancelled")}})}catch(g){console.log(g.message);return}const{framework:h,overwrite:v,packageName:c,variant:y}=r,p=F.join(ie,n);v?_s(p):O.existsSync(p)||O.mkdirSync(p,{recursive:!0});const f=y||h||i,m=bo(process.env.npm_config_user_agent),E=m?m.name:"npm",D=E==="yarn"&&m?.version.startsWith("1."),{customCommand:I}=tt.flatMap(g=>g.variants).find(g=>g.name===f)??{};if(I){const g=I.replace("TARGET_DIR",n).replace(/^npm create/,`${E} create`).replace("@latest",()=>D?"":"@latest").replace(/^npm exec/,()=>E==="pnpm"?"pnpm dlx":E==="yarn"&&!D?"yarn dlx":"npm exec"),[x,...$]=g.split(" "),{status:_}=se.exports.sync(x,$,{stdio:"inherit"});process.exit(_??0)}console.log(`
Scaffolding project in ${p}...`);const M=F.resolve(rt(import.meta.url),"../..",`template-${f}`),L=(g,x)=>{const $=F.join(p,So[g]??g);x?O.writeFileSync($,x):Cs(F.join(M,g),$)},A=O.readdirSync(M);for(const g of A.filter(x=>x!=="package.json"))L(g);const w=JSON.parse(O.readFileSync(F.join(M,"package.json"),"utf-8"));switch(w.name=c||o(),L("package.json",JSON.stringify(w,null,2)),console.log(`
Done. Now run:
`),p!==ie&&console.log(`  cd ${F.relative(ie,p)}`),E){case"yarn":console.log("  yarn"),console.log("  yarn dev");break;default:console.log(`  ${E} install`),console.log(`  ${E} run dev`);break}}const _o=Ns(Ls);async function Co(t){try{const e=await ge([{type:"text",name:"projectName",message:"What is the name of the project you want to create?",initial:"myGithubTepProject"},{type:"text",name:"repoAddress",message:"What's your github address",initial:"https://github.com/youGithubName/youRepoName.git"}]),s=F.join(ie,e.projectName);console.log("github\u6A21\u677F\u4FE1\u606F\u662F---",e),O.existsSync(s)&&((await ge({type:"confirm",name:"value",message:"The folder exists, do you need to create a new folder to cover it?",initial:!0})).value===!0?_s(s):process.exit(0),console.log("\u5220\u9664\u4E86\u539F\u6587\u4EF6\u5939\u91CC\u5168\u90E8\u7684\u5185\u5BB9")),await _o(`direct:${e.repoAddress}`,e.projectName,{clone:!0}),console.log("\u6A21\u677F\u521B\u5EFA\u6210\u529F\uFF01")}catch(e){console.log(e.message),process.exit(0)}}async function Oo(t){const e=F.join(ie,"sp.config.json"),s=Oe(),i={type:"select",name:"value",message:"Pick a frame",choices:[{title:"react+fn",value:"react_fn"},{title:"react+class",value:"react_class"},{title:"react+ts+fn",value:"react_ts_fn"},{title:"react+ts+class",value:"react_ts_class"},{title:"vue2",value:"vue2"},{title:"vue3",value:"vue3"},{title:"vue3+setup",value:"vue3_su"},{title:"vue3+ts",value:"vue3_ts"},{title:"vue3+ts+setup",value:"vue3_ts_su"}],initial:3};if(!s.frame){const{value:o}=await ge(i);s.frame=o,O.writeFileSync(e,JSON.stringify(s,null,2))}const n=t.path||s.componentsPath;mo(t.name,n,s.frame)}function To(t){t.f||!O.existsSync(ve)?Os(!0):console.log("\u6587\u4EF6\u5DF2\u5B58\u5728\uFF0C\u5982\u679C\u9700\u8981\u5F3A\u5236\u521D\u59CB\u5316\u914D\u7F6E\u6587\u4EF6\uFF0C\u53EF\u4EE5\u6267\u884C `create-sp initSP -f` \u547D\u4EE4")}function Po(){const{token:t,repoName:e,githubUserName:s}=Oe();[t,e,s].every(i=>i!="")||(console.log(De("\u60A8\u6CA1\u6709\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u8BBE\u7F6Etoken\u3001repoName\u3001githubUserName\u5C5E\u6027\u7684\u503C")),process.exit(0)),R("git",["init"],"git\u521D\u59CB\u5316"),R("curl",["-L","-X","POST","-H","Accept:application/vnd.github+json","-H",`Authorization:Bearer ${t}`,"-H","X-GitHub-Api-Version:2022-11-28","https://api.github.com/user/repos","-d",`{"name":"${e}","description":"This is your first repo!"}`],"\u521B\u5EFAGithub\u4ED3\u5E93"),R("git",["remote","add","origin",`https://github.com/${s}/${e}.git`],"\u5173\u8054\u8FDC\u7AEF\u4ED3\u5E93"),R("git",["add","."],"\u6267\u884Cgit add"),R("git",["commit","-a","-m","\u521D\u59CB\u5316\u63D0\u4EA4"],"\u6267\u884Cgit commit"),R("git",["branch","-M","main"],"\u91CD\u547D\u540D\u5F53\u524D\u5206\u652F\u4E3Amain"),R("git",["push","--set-upstream","origin","main"],"\u6267\u884Cgit push"),process.exit(0)}async function Do(t){if(t._[0]==="lint"&&t.init){console.log(he("create-sp lint --init\u7684\u6267\u884C\u903B\u8F91"));try{const e=await ge([{type:"select",name:"value",message:"Pick a framework",choices:[{title:"vue",value:"vue"},{title:"vue+ts",value:"vue_ts"},{title:"react",value:"react"},{title:"react+ts",value:"react_ts"}],initial:1}]);yo(e.value),$o(e.value),console.log("eslint\u521D\u59CB\u5316\u914D\u7F6E\u5B8C\u6210");return}catch(e){console.log(e.message),process.exit(1)}}if(t._[0]==="lint"&&!t.init){const e=Oe();e.esLint||(console.log(ht("\u8BF7\u5148\u6267\u884Ccreate-sp lint --init\u547D\u4EE4")),process.exit(1));const s=new Rs({cwd:ie,overrideConfig:e.esLint}),i=await s.lintFiles(e.lintFilesArr),n=(await s.loadFormatter("stylish")).format(i);if(n!==""){console.log(n);const o=Eo(n);console.log(he(`esLint\u68C0\u67E5\u5B8C\u6BD5
    \u5171\u6709:${o.problems}\u4E2A\u95EE\u9898
    \u9519\u8BEF:${o.errors}
    \u8B66\u544A:${o.warnings}`))}else console.log(he("\u4F60\u7684\u9879\u76EE\u6CA1\u6709\u68C0\u67E5\u5230\u9519\u8BEF"));process.exit(0)}}const G=new Map;G.set(["-v","--version"],ui),G.set(["","/",".","--template"],xo),G.set(["githubTep"],Co),G.set(["add --name --path","add --name"],Oo),G.set(["initSP","initSP -f"],To),G.set(["repo"],Po),G.set(["lint","lint --init"],Do);function Fo(t){let e;const s=[];for(const o in t)o==="_"?e=t[o][0]??"":o.length==1&&typeof t[o]=="boolean"?s.push("-"+o):s.push("--"+o);const i=s.reduce((o,r)=>o+r+" ","").slice(0,-1),n=(e===""||e&&!i?e+"":e+" ")+i;try{let o=null;G.forEach((r,h)=>{h.some(v=>v===n)&&(o=h)}),G.get(o)(t)}catch{console.log("\u60A8\u8F93\u5165\u7684\u6307\u4EE4\u4E0D\u6B63\u786E")}}const Ao=Vs(process.argv.slice(2),{string:["_"]});Fo(Ao);
